<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <title> - 系统功能管理</title>
    <meta name="keywords" content="">
    <meta name="description" content="">

    <link rel="shortcut icon" href="favicon.ico"> <link href="__PUBLIC__/css/bootstrap.min.css?v=3.3.6" rel="stylesheet">
    <link href="__PUBLIC__/css/font-awesome.css?v=4.4.0" rel="stylesheet">

    <!-- jqgrid-->
    <link href="__PUBLIC__/css/plugins/jqgrid/ui.jqgrid.css?0820" rel="stylesheet">

    <link href="__PUBLIC__/css/plugins/iCheck/custom.css" rel="stylesheet">
    <link href="__PUBLIC__/css/animate.css" rel="stylesheet">
    <link href="__PUBLIC__/css/style.css?v=4.1.0" rel="stylesheet">

    <style>
        .level1{
            margin-left: 5px;
        }
        .level1-size{
            font:16px bold;
        }
        .level2{            
            height:20px;
            margin-left: 15px;
            margin-top: 5px;
            line-height: 20px;
        }
        .level3{
            margin-left: 25px;
            display: inline-block;
            margin-top: 5px;
        }
    </style>

</head>

<body class="gray-bg">
    <div class="wrapper wrapper-content animated fadeInRight">        
        <div class="row">
            <div class="col-sm-12">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5>系统功能列表</h5>
                    </div>
                    
                    <div class="ibox-content">
                        <foreach name='node' item='app'>
                            <div class='level1'>
                                <span class='level1-size'>{$app.remark}</span>
                                <span class='level1-size'>
                                    [<a href="{:U('Rbac/addNode',array('pid'=>$app['id'],'level'=>2))}">添加控制器</a>]
                                    [<a href="{:U('Rbac/alterNode',array('id'=>$app['id']))}">修改</a>]
                                    [<a href="{:U('Rbac/deleteNode',array('id'=>$app['id']))}" class='deleteNode'>删除</a>]
                                </span>
                            <foreach name='app.child' item='action'>
                                <dl>
                                <dt class='level2'>
                                    <span>{$action.remark}</span>
                                    <span>
                                        [<a href="{:U('Rbac/addNode',array('pid'=>$action['id'],'level'=>3))}">添加方法</a>]
                                        [<a href="{:U('Rbac/alterNode',array('id'=>$action['id']))}">修改</a>]
                                        [<a href="{:U('Rbac/deleteNode',array('id'=>$action['id']))}"  class='deleteNode'>删除</a>]
                                    </span>
                                
                                <foreach name='action.child' item='method'>
                                    <dd class='level3'>
                                        <span>{$method.remark}</span>
                                        <span>
                                            [<a href="{:U('Rbac/alterNode',array('id'=>$method['id']))}">修改</a>]
                                            [<a href="{:U('Rbac/deleteNode',array('id'=>$method['id']))}"  class='deleteNode'>删除</a>]
                                        </span>
                                    </dd>
                                </foreach>
                                </dt>
                                </dl>
                                <br/>
                                <br/>
                            </foreach>
                            </div>
                        </foreach>
                    </div>
                </div>
            </div>
        </div>
    </div>   

    <!-- 全局js -->
    <script src="__PUBLIC__/js/jquery.min.js?v=2.1.4"></script>
    <script src="__PUBLIC__/js/bootstrap.min.js?v=3.3.6"></script>

    <!-- Peity -->
    <script src="__PUBLIC__/js/plugins/peity/jquery.peity.min.js"></script>

    <!-- jqGrid -->
    <script src="__PUBLIC__/js/plugins/jqgrid/i18n/grid.locale-cn.js?0820"></script>
    <script src="__PUBLIC__/js/plugins/jqgrid/jquery.jqGrid.min.js?0820"></script>

    <!-- 自定义js -->
    <script src="__PUBLIC__/js/content.js?v=1.0.0"></script>

    <script src="__PUBLIC__/js/plugins/layer/layer.min.js"></script>  

    <script>
        $(document).ready(function () {
            $('.deleteNode').click(function(e){
                // layer.confirm('确定删除吗?', {icon: 3, title:'提示'}, function(index){
                //     layer.close(index);
                // }, function(index){
                //     layer.close(index);
                // });
                if (!confirm("确定删除吗？","提示")) {
                    e.preventDefault();
                }
                
            });
        });
    </script>
    

    
    

</body>

</html>
